---
export interface Props {
  tabs: string[];
}
const { tabs } = Astro.props;
---

<script is:inline>
  let panels = [];

  function tab_open(e) {
    const index = Array.from(e.parentNode.childNodes)
      .filter((c) => c.nodeName === e.nodeName)
      .indexOf(e);
    show(index);
    return false;
  }

  function show(showidx) {
    panels.forEach(
      (tab, idx) =>
        (tab.style.display =
          idx === showidx ? tab.dataset.orig_display : "none")
    );
  }

  setTimeout(() => {
    panels = Array.from(document.querySelectorAll(".contents > *"));
    panels.forEach(
      (tab, idx) => (tab.dataset.orig_display = tab.style.display)
    );
    show(0);
  }, 100);
</script>

<div class="tabs">
  {
    tabs.map((tab) => (
      <button class="tab btn-tab" onclick={`tab_open(this)`}>
        {tab}
      </button>
    ))
  }
</div>

<div class="contents">
  <slot />
</div>

<style lang="scss">
  @import "../layouts/global.scss";

  .tabs {
    display: flex;

    .tab {
      flex: 1;
    }
  }

  button {
    border: 0;
    background-color: $color-white;
    padding: $base * 2;
    cursor: pointer;

    &:hover {
      color: $color-white;
      background-color: $color-text-info;
    }
  }

  .contents {
    min-height: $base * 64;
    padding: $base * 8;
    background-color: $color-white;
  }
</style>
